import type { ReactiveElement } from 'lit';
import { FluxConnection } from './FluxConnection.js';
/**
 * An exception that gets thrown when the Vaadin backend responds
 * with not ok status.
 */
export declare class EndpointError extends Error {
    /**
     * The optional name of the exception that was thrown on a backend
     */
    type?: string;
    /**
     * The optional detail object, containing additional information sent
     * from a backend
     */
    detail?: any;
    /**
     * @param message the `message` property value
     * @param type the `type` property value
     * @param detail the `detail` property value
     */
    constructor(message: string, type?: string, detail?: any);
}
/**
 * An exception that gets thrown if Vaadin endpoint responds
 * with non-ok status and provides additional info
 * on the validation errors occurred.
 */
export declare class EndpointValidationError extends EndpointError {
    /**
     * An original validation error message.
     */
    validationErrorMessage: string;
    /**
     * An array of the validation errors.
     */
    validationErrorData: ValidationErrorData[];
    /**
     * @param message the `message` property value
     * @param validationErrorData the `validationErrorData` property value
     * @param type the `type` property value
     */
    constructor(message: string, validationErrorData: ValidationErrorData[], type?: string);
}
/**
 * An exception that gets thrown for unexpected HTTP response.
 */
export declare class EndpointResponseError extends EndpointError {
    /**
     * The optional response object, containing the HTTP response error
     */
    response: Response;
    /**
     * @param message the `message` property value
     * @param response the `response` property value
     */
    constructor(message: string, response: Response);
    /**
     * Convenience property to get the HTTP code status directly
     */
    get status(): number;
}
export declare class UnauthorizedResponseError extends EndpointResponseError {
    constructor(message: string, response: Response);
}
export declare class ForbiddenResponseError extends EndpointResponseError {
    constructor(message: string, response: Response);
}
/**
 * Represents the connection to and endpoint returning a subscription rather than a value.
 */
export interface Subscription<T> {
    /** Cancels the subscription.  No values are made available after calling this. */
    cancel: () => void;
    /** Called when a new value is available. */
    onNext: (callback: (value: T) => void) => Subscription<T>;
    /** Called when an exception occured in the subscription. */
    onError: (callback: () => void) => Subscription<T>;
    /** Called when the subscription has completed. No values are made available after calling this. */
    onComplete: (callback: () => void) => Subscription<T>;
    context: (context: ReactiveElement) => Subscription<T>;
}
/**
 * An object, containing all data for the particular validation error.
 */
export declare class ValidationErrorData {
    /**
     * The validation error message.
     */
    message: string;
    /**
     * The parameter name that caused the validation error.
     */
    parameterName?: string;
    /**
     * @param message the `message` property value
     * @param parameterName the `parameterName` property value
     */
    constructor(message: string, parameterName?: string);
}
/**
 * The `ConnectClient` constructor options.
 */
export interface ConnectClientOptions {
    /**
     * The `prefix` property value.
     */
    prefix?: string;
    /**
     * The `middlewares` property value.
     */
    middlewares?: Middleware[];
}
export interface EndpointCallMetaInfo {
    /**
     * The endpoint name.
     */
    endpoint: string;
    /**
     * The method name to call on in the endpoint class.
     */
    method: string;
    /**
     * Optional object with method call arguments.
     */
    params?: any;
}
/**
 * An object with the call arguments and the related Request instance.
 * See also {@link ConnectClient.call | the call() method in ConnectClient}.
 */
export interface MiddlewareContext extends EndpointCallMetaInfo {
    /**
     * The Fetch API Request object reflecting the other properties.
     */
    request: Request;
}
/**
 * An async middleware callback that invokes the next middleware in the chain
 * or makes the actual request.
 * @param context The information about the call and request
 */
export type MiddlewareNext = (context: MiddlewareContext) => Promise<Response> | Response;
/**
 * An interface that allows defining a middleware as a class.
 */
export interface MiddlewareClass {
    /**
     * @param context The information about the call and request
     * @param next Invokes the next in the call chain
     */
    invoke(context: MiddlewareContext, next: MiddlewareNext): Promise<Response> | Response;
}
/**
 * An async callback function that can intercept the request and response
 * of a call.
 */
type MiddlewareFunction = (context: MiddlewareContext, next: MiddlewareNext) => Promise<Response> | Response;
/**
 * An async callback that can intercept the request and response
 * of a call, could be either a function or a class.
 */
export type Middleware = MiddlewareClass | MiddlewareFunction;
/**
 * A list of parameters supported by {@link ConnectClient.call | the call() method in ConnectClient}.
 */
export interface EndpointRequestInit {
    /**
     * An AbortSignal to set request's signal.
     */
    signal?: AbortSignal | null;
}
/**
 * A low-level network calling utility. It stores
 * a prefix and facilitates remote calls to endpoint class methods
 * on the Hilla backend.
 *
 * Example usage:
 *
 * ```js
 * const client = new ConnectClient();
 * const responseData = await client.call('MyEndpoint', 'myMethod');
 * ```
 *
 * ### Prefix
 *
 * The client supports an `prefix` constructor option:
 * ```js
 * const client = new ConnectClient({prefix: '/my-connect-prefix'});
 * ```
 *
 * The default prefix is '/connect'.
 *
 */
export declare class ConnectClient {
    /**
     * The Hilla endpoint prefix
     */
    prefix: string;
    /**
     * The array of middlewares that are invoked during a call.
     */
    middlewares: Middleware[];
    private _fluxConnection;
    /**
     * @param options Constructor options.
     */
    constructor(options?: ConnectClientOptions);
    /**
     * Calls the given endpoint method defined using the endpoint and method
     * parameters with the parameters given as params.
     * Asynchronously returns the parsed JSON response data.
     *
     * @param endpoint Endpoint name.
     * @param method Method name to call in the endpoint class.
     * @param params Optional parameters to pass to the method.
     * @param __init Optional parameters for the request
     * @returns {} Decoded JSON response data.
     */
    call(endpoint: string, method: string, params?: any, __init?: EndpointRequestInit): Promise<any>;
    /**
     * Subscribes to the given method defined using the endpoint and method
     * parameters with the parameters given as params. The method must return a
     * compatible type such as a Flux.
     * Returns a subscription that is used to fetch values as they become available.
     *
     * @param endpoint Endpoint name.
     * @param method Method name to call in the endpoint class.
     * @param params Optional parameters to pass to the method.
     * @returns {} A subscription used to handles values as they become available.
     */
    subscribe(endpoint: string, method: string, params?: any): Subscription<any>;
    /**
     * Gets a representation of the underlying persistent network connection used for subscribing to Flux type endpoint methods.
     */
    get fluxConnection(): FluxConnection;
}
export {};
//# sourceMappingURL=Connect.d.ts.map