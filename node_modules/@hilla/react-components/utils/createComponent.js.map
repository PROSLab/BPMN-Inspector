{"version":3,"file":"createComponent.js","sourceRoot":"","sources":["../src/utils/createComponent.ts"],"names":[],"mappings":"AAAA,OAAO,EACL,eAAe,IAAI,gBAAgB,GAIpC,MAAM,iBAAiB,CAAC;AA6CzB,MAAM,UAAU,eAAe,CAAmD,OAAsB;IACtG,MAAM,EAAE,YAAY,EAAE,GAAG,OAAO,CAAC;IAEjC,OAAO,gBAAgB,CACrB,aAAa,IAAI,YAAY;QAC3B,CAAC,CAAC;YACE,GAAG,OAAO;YACV,iDAAiD;YACjD,wEAAwE;YACxE,yEAAyE;YACzE,gEAAgE;YAChE,iBAAiB;YACjB,YAAY,EAAE;gBACZ,qEAAqE;gBACrE,IAAI,EAAE,YAAY,CAAC,IAAI;gBACvB,SAAS,EAAE,YAAY,CAAC,WAAW;aACpC;SACF;QACH,CAAC,CAAC,OAAO,CACZ,CAAC;AACJ,CAAC","sourcesContent":["import {\n  createComponent as _createComponent,\n  EventName,\n  WebComponentProps as _WebComponentProps,\n  ReactWebComponent,\n} from '@lit-labs/react';\nimport type { ThemePropertyMixinClass } from '@vaadin/vaadin-themable-mixin/vaadin-theme-property-mixin.js';\nimport type { ForwardRefExoticComponent, PropsWithoutRef, RefAttributes } from 'react';\n\n// TODO: Remove when types from @lit-labs/react are exported\nexport type EventNames = Record<string, EventName | string>;\ntype Constructor<T> = { new (): T; name: string };\ntype PolymerConstructor<T> = Constructor<T> & { _properties: Record<string, unknown> };\ntype Options<I extends HTMLElement, E extends EventNames = {}> = Readonly<{\n  displayName?: string;\n  elementClass: Constructor<I> | PolymerConstructor<I>;\n  events?: E;\n  react: typeof window.React;\n  tagName: string;\n}>;\n\nexport type ThemedWebComponentProps<I extends ThemePropertyMixinClass & HTMLElement, E extends EventNames = {}> = Omit<\n  _WebComponentProps<I, E>,\n  'theme'\n> & {\n  /**\n   * Remove the deprecation warning for React components. In our case, the\n   * property is deprecated in favor of an attribute. However, for React, it\n   * does not matter if an attribute or a property is set; the same algorithm\n   * will be used.\n   *\n   * @see ThemePropertyMixinClass#theme\n   */\n  theme?: string;\n};\n\nexport type WebComponentProps<I extends HTMLElement, E extends EventNames = {}> = I extends ThemePropertyMixinClass\n  ? ThemedWebComponentProps<I, E>\n  : _WebComponentProps<I, E>;\n\nexport type ThemedReactWebComponent<\n  I extends ThemePropertyMixinClass & HTMLElement,\n  E extends EventNames = {},\n> = ForwardRefExoticComponent<PropsWithoutRef<ThemedWebComponentProps<I, E>> & RefAttributes<I>>;\n\n// We need a separate declaration here; otherwise, the TypeScript fails into the\n// endless loop trying to resolve the typings.\nexport function createComponent<I extends HTMLElement, E extends EventNames = {}>(\n  options: Options<I, E>,\n): I extends ThemePropertyMixinClass ? ThemedReactWebComponent<I, E> : ReactWebComponent<I, E>;\nexport function createComponent<I extends HTMLElement, E extends EventNames = {}>(options: Options<I, E>): any {\n  const { elementClass } = options;\n\n  return _createComponent(\n    '_properties' in elementClass\n      ? {\n          ...options,\n          // TODO: improve or remove the Polymer workaround\n          // 'createComponent' relies on key presence on the custom element class,\n          // but Polymer defines properties on the prototype when the first element\n          // is created. Workaround: pass a mock object with properties in\n          // the prototype.\n          elementClass: {\n            // @ts-expect-error: it is a specific workaround for Polymer classes.\n            name: elementClass.name,\n            prototype: elementClass._properties,\n          },\n        }\n      : options,\n  );\n}\n"]}