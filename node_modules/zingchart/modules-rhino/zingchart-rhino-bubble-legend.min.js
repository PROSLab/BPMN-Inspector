/*
All of the code within the ZingChart software is developed and copyrighted by ZingChart, Inc., and may not be copied,
replicated, or used in any other software or application without prior permission from ZingChart. All usage must coincide with the
ZingChart End User License Agreement which can be requested by email at support@zingchart.com.

Build 2.9.10
*/
zingchart.setModule("bubble-legend"),zingchart.plugins.bubblelegend={},zingchart.plugins.bubblelegend.info={},zingchart.bind(null,"complete",function(e){var n=zingchart.getLoader(e.id),i=zingchart.getModules(n);if(-1!==ZC.AV(i,"bubble-legend"))for(var a=0,t=n.AG.length;a<t;a++){var l=!1,r={},o=n.AG[a];if(o.o["bubble-legend"])for(var d=0,g=o.AZ.A3.length;d<g;d++){var b=o.AZ.A3[d];"bubble"!==b.AF&&"hbubble"!==b.AF||(l=!0,r["g"+b.A1A]=r["g"+b.A1A]||{min:Number.MAX_VALUE,max:-Number.MAX_VALUE,maxSize:0,graphid:a,plotindex:b.K,color:"-1"!==b.A2.A0?b.A2.A0:b.BP[1]},r["g"+b.A1A].max=Math.max(r["g"+b.A1A].max,b.WU),r["g"+b.A1A].min=Math.min(r["g"+b.A1A].min,b.RM))}if(l){var c=o.o["bubble-legend"]||{},h=c.layout||"v";null===ZC._n_(c.margin)&&(c.margin="v"===h?"auto 10 auto auto":"auto auto 10 auto");var p,u,s,x,z,m,_,A=[],f=0,v=Number.MAX_VALUE,y=0,Z=0,C=zingchart.getInstance(o,"textbox");for(u in r)for(y++,s=r[u],z=(x=ZC.AQ.VS(s.min,s.max))[3],f=Math.max(f,zingchart.exec(n.L,"getbubblesize",{graphid:s.graphid,plotindex:s.plotindex,value:x[1]})),v=Math.min(v,zingchart.exec(n.L,"getbubblesize",{graphid:s.graphid,plotindex:s.plotindex,value:0===x[0]?x[0]+x[2]:x[0]})),p=x[0];p<=x[1];p+=x[2])p>0&&(m={decimals:z,short:!0,"thousands-separator":",","decimals-separator":"."},ZC._cp_(c.item,m),_=zingchart.formatNumber(x[1],m),C.append({"font-size":10,text:_}),C.append(c.item),C.parse(),Z=Math.max(Z,C.I));var M=ZC._i_(c.padding||5),L=zingchart.getInstance(o,"box");L.append({id:o.L+"-bubblelegend-box"}),"v"===h?L.append({width:2*M+2*f+10+Z,height:2*M+2*f*y+10*(y-1)+5}):L.append({width:2*M+2*f*y+10*(y-1)+y*Z,height:2*M+2*f+30}),L.append(o.o["bubble-legend"]),L.parse();var V={type:"rect",x:L.iX+L.I/2,y:L.iY+L.F/2,width:L.I,height:L.F,"background-color":"#fff"};ZC._cp_(o.o["bubble-legend"],V),A.push(V);var w=0;for(u in r){s=r[u],z=(x=ZC.AQ.VS(s.min,s.max))[3];var X=[];for(p=x[0];p<=x[1];p+=x[2])p>0&&X.push(p);var I=[];for(f<15?I.push(X[X.length-1]):f>=15&&f<25?I.push(X[0],X[X.length-1]):f-v>=10?I.push(X[0],X[Math.floor(X.length/2.5)],X[X.length-1]):I.push(X[0],X[X.length-1]),p=0;p<I.length;p++){var N=zingchart.exec(n.L,"getbubblesize",{graphid:s.graphid,plotindex:s.plotindex,value:I[p]});m={decimals:z,short:!0,"thousands-separator":",","decimals-separator":"."},ZC._cp_(c.item,m),_=zingchart.formatNumber(I[p],m);var F,U,j=n.L+"_"+s.graphid;y>1&&(j+="_"+s.plotindex),"h"===h?(F=L.iX+w*(10+2*f+Z)+M,U=L.iY+f+M+15):(F=L.iX+f+M,U=L.iY+M+2*f+w*(10+2*f)+5),zingchart.plugins.bubblelegend.info[j]={x:F,y:U,layout:h};var k={id:o.L+"-bubblelegend-circle_"+w+"_"+p,type:"circle",size:N,alpha:.25,"background-color":y>1?s.color:"#999","line-style":"dotted","border-width":1,"border-alpha":1,"border-color":"#333"};if("h"===h){var E=U+(p%2==0?-1:1)*(f+10);p===I.length-1&&3===I.length&&(E=U-f/2-5),ZC._cp_({x:F+N,y:U,connector:{"line-width":1,"line-style":"dotted","line-color":"#333",anchor:"l",points:[[F+2*N,U],[F+2*N,E]]}},k)}else ZC._cp_({x:F,y:U-N,connector:{"line-width":1,"line-style":"dotted","line-color":"#333",anchor:"l",points:[[F,U-2*N],[F+f+10,U-2*N]]}},k);ZC._cp_({label:{color:"#666","font-size":10,align:"left",text:_}},k),ZC._cp_(c.marker,k),ZC._cp_(c.connector,k.connector),ZC._cp_(c.item,k.label),A.push(k)}w++}zingchart.exec(n.L,"addobject",{type:"shape",data:A})}}}),zingchart.bind(null,"node_mouseout",function(e){var n=zingchart.getLoader(e.id),i=zingchart.getModules(n);-1!==ZC.AV(i,"bubble-legend")&&zingchart.exec(e.id,"removeobject",{type:"shape",dynamic:!0,id:e.id+"_"+e.graphindex+"-bubblelegend-circle"})}),zingchart.bind(null,"node_mouseover",function(e){var n=zingchart.getLoader(e.id),i=zingchart.getModules(n);if(-1!==ZC.AV(i,"bubble-legend")&&null!==ZC._n_(e.size)){var a=e.id+"_"+e.graphindex;zingchart.plugins.bubblelegend.info[a]||(a+="_"+e.plotindex);var t={id:e.id+"_"+e.graphindex+"-bubblelegend-circle",type:"circle",size:e.size,"border-width":1,"border-color":"#333"};"h"===zingchart.plugins.bubblelegend.info[a].layout?(t.x=zingchart.plugins.bubblelegend.info[a].x+e.size,t.y=zingchart.plugins.bubblelegend.info[a].y):(t.x=zingchart.plugins.bubblelegend.info[a].x,t.y=zingchart.plugins.bubblelegend.info[a].y-e.size),zingchart.exec(e.id,"addobject",{type:"shape",dynamic:!0,data:t})}});